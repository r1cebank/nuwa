---
# system and storage
k3s_version: v1.26.2+k3s1
k3s_storage_class: longhorn
systemd_dir: /etc/systemd/system
extra_server_args: "--disable=traefik --disable servicelb --resolv-conf /run/systemd/resolve/resolv.conf"
extra_agent_args: ""
external_snapshotter_repo: https://github.com/kubernetes-csi/external-snapshotter.git
external_snapshotter_tag: release-4.0

longhorn_version: 1.4.1
longhorn_backup_target: nfs://192.168.1.131:/volume2/longhorn-backup
longhorn_backup_cron: "0 5 * * *"
longhorn_backup_retain: 2

nfs_provisioner_server: 192.168.1.131
nfs_provisioner_server_path: /volume2/k8s/nfs-provisioner

csi_driver_nfs_version: v4.2.0

# minio storage server settings
minio_nfs_mount_source: 192.168.1.131:/volume2/minio
minio_host_ip: 192.168.1.110
minio_nfs_mount_dest: /mnt/minio
minio_dpkg: https://dl.min.io/server/minio/release/linux-amd64/minio_20230324214123.0.0_amd64.deb
minio_root_user: admin
minio_root_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  66663463336236626461666135336337656134656366633865333963343064373634313363323739
  6165353161313465343063363065393565393335373663370a336164633866623835353662396163
  37326238396139633366343739323063373861313733663462306330303230656465353562373235
  3931323465396235610a643964353365346432376463663365313835316337306565323865373835
  39326430366366396531316336666366373865313038663436366434396536633839623030626662
  62643136393933376139616663623939623531663339343334336664663035666333663866356438
  37346661373738323530313639306163666439643432376532633832323438623464303433346461
  30383337396136666230663735386139643934366533663664333237366364656562366332363031
  3533

# velero
velero_backup_bucket: velero
velero_backup_target: https://s3.owo.ac
velero_backup_schedule: "0 4 * * *"
velero_backup_excluded_resources:
  - persistentvolumes
  - persistentvolumeclaims
  - backuptargets.longhorn.io
  - backupvolumes.longhorn.io
  - backups.longhorn.io
  - nodes.longhorn.io
  - volumes.longhorn.io
  - engines.longhorn.io
  - replicas.longhorn.io
  - backingimagedatasources.longhorn.io
  - backingimagemanagers.longhorn.io
  - backingimages.longhorn.io
  - sharemanagers.longhorn.io
  - instancemanagers.longhorn.io
  - engineimages.longhorn.io

# network related
metallb_mode: layer2
ingress_class: traefik
ingress_loadbalancer_ip: 192.168.1.200
metallb_address_range: 192.168.1.200-192.168.1.250
traefik_tls_min_version: VersionTLS12
traefik_dashboard_enabled: true
traefik_force_ssl: true

# cert manager
cert_manager_version: v1.11.0
cert_manager_crds_url: https://github.com/cert-manager/cert-manager/releases/download/v1.11.0/cert-manager.crds.yaml
cert_manager_issuer_prod: certissuer-prod
cert_manager_issuer_staging: certissuer-staging
acme_email: siyuangao@pm.me
acme_staging_url: https://acme-staging-v02.api.letsencrypt.org/directory
acme_prod_url: https://acme-v02.api.letsencrypt.org/directory
ingress_issuer: certissuer-staging

# cloudflare provider
cloudflare_email: siyuangao@protonmail.com
cloudflare_api_token: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  64646637363136646536356339393135326138313933653166383637663863383132346166643735
  3937393732623637353133613164633938663637323862360a343963633463663666363837303563
  38373132353838393066356436316561653861643431393537613364366264313533633663363738
  6630343062653561650a346338303936613037326664343338343630356665623437666538666636
  37303538393235323232616437333364623837653537396564313364323562363862653930396365
  6134333465333831626531356166353761666363316637393831

# internal services

# smtp config
service_smtp_host: in-v3.mailjet.com
service_smtp_port: 587
service_smtp_from: noreply@miku.cx
service_smtp_username: d86fa73b53b9e7b67d3f8831be6329aa
service_smtp_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  32666362346230613631323631336437653461366630323234636530363462373237373965633966
  6364666234643661653632383830633764383063323035650a376361316662393761353431383231
  62656463383562346661636436346339356236303562613137653162303631316261643235633937
  6462393563383934650a613862633035646137306633343530613834383335666430313335643537
  65303234646163386662643262633662626336336430336161393038373663643564356538373935
  6639363766643535303963333763333764343861306237306666

# vaultwarden
vaultwarden_chart_repo: https://github.com/r1cebank/vaultwarden.git
vaultwarden_chart_commit: 0a14e03455add3b4f0db1546e2910cd382fb8223
vaultwarden_image_tag: 1.27.0
vaultwarden_host: vw.owo.ac
vaultwarden_disk_size: 10Gi
vaultwarden_admin_token: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  66643239656535663632306430313066383031666637373664616266343139333139646265656261
  3938626538633937333739303531313263306262316265630a343030376166396331663037303439
  62343736663839376535656539353731326437303063396561613830623963323061616464636135
  3832663735336564310a633833633962633861663263356161643061663634643337366364383739
  34353738343736623334353461306130313536626333613561376163656530353230613635633062
  61393434333736633639633330303637623766323838336237333632323336353463336565356561
  666233383066343664653737333365663439

vaultwarden_signup_whitelist: owo.ac,miku.cx,pm.me,protonmail.me,r1ce.net
vaultwarden_yubikey_client_id: 56344
vaultwarden_yubikey_client_secret: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  32363330303463656162663635656266353837656665373239343335366562663139353564636631
  3733303335373731346162663436373432306463316164630a393730396336313230666235633338
  35346134646638373764653837663738633562653830353761323366653566326232343763316130
  6430376630313163310a323861373838356633313462346130316166626164323534613130326131
  36306631653135613338376262303334333936323963636566366364393461313831

onedev_chart_repo: https://dl.cloudsmith.io/public/onedev/onedev/helm/charts
onedev_host: onedev.owo.ac
onedev_repo_storage_size: 100Gi
onedev_sql_storage_size: 20Gi
onedev_sql_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  38636231323762363866393965343339346134643238613865643631376463323666633133326632
  3536363666646633343436666531343635363231623464300a313736656330646333656230393035
  35646634336539343431303965373563353834643430613232383961356337383265396237646565
  6166616639323636390a366265383432343834343536346565636331626231643366313931653635
  34376433303562393334396532653638373930653733316331303636343964343633623132386231
  3463646161366538633263623437623063346338333638663863
onedev_admin_email: admin@owo.ac
onedev_admin_username: admin
onedev_admin_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  61613364333130626130653434366563343630383463353364623935616631623335393365373536
  3535643934313638626139613235636536386433336539620a613832633538393038333864306662
  66666234303531326162656335376233626330366262653666653063666338393430316132366131
  3066653562653139620a353161613462646133663066333739613736666435353937653864303462
  36316532313864653737396332363531383038363133613234633637326332346435366135623230
  3233376135663539366432356633613334656230316361623365

# mysql
mysql_chart_repo: https://charts.bitnami.com/bitnami

# coder
coder_chart_repo: https://helm.coder.com/v2
coder_db_size: 10Gi
coder_host: coder.owo.ac

# arch mirror
caddy_download_url: https://caddyserver.com/api/download?os=linux&arch=amd64
arch_mirror_dir: /home/archmirror/arch
arch_sync_script_path: /home/archmirror/syncrepo.sh
arch_repo_rsync_source: rsync://mirror.csclub.uwaterloo.ca/archlinux/
arch_repo_lastupdate: http://mirror.csclub.uwaterloo.ca/archlinux/lastupdate
arch_mirror_host: arch.owo.ac

# external service, ingress serve outside services
external_services:
  - name: synology-nas
    ip: 192.168.1.131
    source_port: 5000
    service_port: 80
    protocol: TCP
    ingress_domain: nas.owo.ac
  - name: minio-console
    ip: 192.168.1.110
    source_port: 9001
    service_port: 80
    protocol: TCP
    ingress_domain: minio.owo.ac
  - name: minio-s3
    ip: 192.168.1.110
    source_port: 9000
    service_port: 80
    protocol: TCP
    ingress_domain: s3.owo.ac
  - name: arch-mirror
    ip: 192.168.1.109
    source_port: 80
    service_port: 80
    protocol: TCP
    ingress_domain: arch.owo.ac
