sshingress:
  enabled: true
  entrypoint: ssh

########################
# postgresql subchart
########################
postgresql:
  primary:
    podAnnotations:
      linkerd.io/inject: enabled
  auth:
    username: gitea
    database: gitea
    existingSecret: gitea-secret
  persistence:
    storageClass: longhorn
    size: 10Gi

########################
# gitea subchart
########################
gitea:
  replicaCount: 1
  persistence:
    enabled: true
    storageClass: longhorn
    size: 100Gi
  gitea:
    admin:
      existingSecret: gitea-admin-secret
    additionalConfigFromEnvs:
      - name: ENV_TO_INI__DATABASE__DB_TYPE
        value: postgres
      - name: ENV_TO_INI__DATABASE__HOST
        value: gitea-postgresql.gitea:5432
      - name: ENV_TO_INI__DATABASE__NAME
        value: gitea
      - name: ENV_TO_INI__DATABASE__USER
        value: gitea
      - name: ENV_TO_INI__DATABASE__SCHEMA
        value: gitea
      - name: ENV_TO_INI__DATABASE__PASSWD
        valueFrom:
          secretKeyRef:
            name: gitea-secret
            key: postgres-password
    metrics:
      enabled: true
    podAnnotations:
      linkerd.io/inject: enabled
  postgresql:
    enabled: false
  memcached:
    enabled: true
